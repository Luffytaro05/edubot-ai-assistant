<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCC Assistant</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="chatbox">
        <div class="chatbox__support">
            <!-- Header -->
            <div class="chatbox__header">
                <div class="chatbox__header-left">
                    <div class="chatbox__logo">
                        <img src="{{ url_for('static', filename='images/EduChat.png') }}" alt="Bot Logo">
                    </div>
                    <div class="chatbox__title">
                        <strong>TCC Assistant</strong>
                    </div>
                </div>
                <div class="chatbox__header-right">
                    <button class="chatbox__announcements" title="View Announcements">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.01-4.65.75-6.78L6.87 1H4v4.84c-.46.63-.79 1.33-.98 2.09-.19.76-.19 1.55 0 2.31C3.46 12.13 4 13.56 4 15v1c0 .55.45 1 1 1h6.77c.12.38.31.76.57 1.1l1.86 1.82L12.87 15.07zM7 9H5v2h2V9zm9.62-2.48l1.83 1.91c.34.35.87.35 1.22 0l.7-.7c.35-.35.35-.87 0-1.22L18.2 4.6l-.7.7c-.35.35-.35.87 0 1.22zm-1.44 1.47l3.08 3.08c.35.35.87.35 1.22 0l.7-.7c.35-.35.35-.87 0-1.22L16.9 6.37l-.7.7c-.35.35-.35.87 0 1.22z"/>
                        </svg>
                    </button>
                    <button class="chatbox__tts" title="Toggle Text-to-Speech">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                        </svg>
                    </button>
                    <button class="chatbox__clear" title="Clear History">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                        </svg>
                    </button>
                    <button class="chatbox__reset" title="Reset Conversation">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                        </svg>
                    </button>
                    <button class="chatbox__close">✕</button>
                </div>
            </div>

            <!-- Announcements Panel -->
            <div class="chatbox__announcements-panel" id="announcements-panel">
                <div class="announcements-header">
                    <h3>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
                            <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.01-4.65.75-6.78L6.87 1H4v4.84c-.46.63-.79 1.33-.98 2.09-.19.76-.19 1.55 0 2.31C3.46 12.13 4 13.56 4 15v1c0 .55.45 1 1 1h6.77c.12.38.31.76.57 1.10l1.86 1.82L12.87 15.07z"/>
                        </svg>
                        College Announcements
                    </h3>
                    <button class="close-announcements">✕</button>
                </div>
                <div class="announcements-content" id="announcements-content">
                    <!-- Announcements will be loaded here -->
                </div>
            </div>

            <!-- Messages -->
            <div class="chatbox__messages">
                <div class="chatbox__greeting">
                    <p>Hi there! I'm your TCC Connect assistant. How can I help you today?</p>
                </div>

                <div class="suggestions-label">Suggested topics:</div>

                <!-- Main suggested topics -->
                <div class="chatbox__suggestions">
                    <button data-sub="admission">Admission Office</button>
                    <button data-sub="registrar">Registrar Office</button>
                    <button data-sub="ict">ICT Office</button>
                    <button data-sub="guidance">Guidance Office</button>
                    <button data-sub="osa">Office of Student Affairs</button>
                    <button data-sub="announcements">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 6px;">
                            <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.01-4.65.75-6.78L6.87 1H4v4.84c-.46.63-.79 1.33-.98 2.09-.19.76-.19 1.55 0 2.31C3.46 12.13 4 13.56 4 15v1c0 .55.45 1 1 1h6.77c.12.38.31.76.57 1.10l1.86 1.82L12.87 15.07z"/>
                        </svg>
                        View Announcements
                    </button>
                </div>

                <!-- Sub-suggestions (dynamically populated) -->
                <div class="chatbox__sub-suggestions" id="sub-suggestions"></div>
                
                <!-- Context indicator -->
                <div class="chatbox__context" id="context-indicator" style="display: none;">
                    <span class="context-text">Currently helping with: <strong id="context-office">General</strong></span>
                    <button class="context-reset" onclick="resetContext()">Switch Topic</button>
                </div>
            </div>

            <!-- Footer -->
            <div class="chatbox__footer">
                <button class="mic__button" title="Voice Input">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/>
                    </svg>
                </button>
                <input type="text" placeholder="Type your message..." maxlength="500">
                <span class="character-count">0/500</span>
                <button class="send__button">➤</button>
            </div>
        </div>

        <!-- Floating button -->
        <div class="chatbox__button">
            <button><img src="{{ url_for('static', filename='images/EduChat.png') }}" alt="Chat Icon"></button>
        </div>
    </div>

    <!-- Voice Recognition Indicator -->
    <div class="voice-indicator" id="voice-indicator">
        <div>Listening...</div>
        <div class="voice-waves">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
        </div>
        <div style="font-size: 12px; opacity: 0.8;">Speak now</div>
    </div>

    <script>
        $SCRIPT_ROOT = {{ request.script_root|tojson }};
    </script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
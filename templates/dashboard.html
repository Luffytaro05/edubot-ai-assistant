<!--(dashboard.html):-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - EduChat Admin Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/css/style.css') }}" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3>EduChat Admin</h3>
            </div>
           <nav class="sidebar-nav">
    <ul>
        <li class="{% if active_page == 'dashboard' %}active{% endif %}">
            <a href="{{ url_for('dashboard') }}"><i class="fas fa-th-large"></i> Dashboard</a>
        </li>
        
        <li class="section-header">USER MANAGEMENT</li>
        <li class="{% if active_page == 'users' %}active{% endif %}">
            <a href="{{ url_for('users') }}"><i class="fas fa-users"></i> User Accounts</a>
        </li>
        <li class="{% if active_page == 'roles' %}active{% endif %}">
            <a href="{{ url_for('roles') }}"><i class="fas fa-user-shield"></i> Roles & Permissions</a>
        </li>
        
        <li class="section-header">CHATBOT MANAGEMENT</li>
        <li class="{% if active_page == 'conversations' %}active{% endif %}">
            <a href="{{ url_for('conversations') }}"><i class="fas fa-comments"></i> Conversation Logs</a>
        </li>
        <li class="{% if active_page == 'faq' %}active{% endif %}">
            <a href="{{ url_for('faq') }}"><i class="fas fa-question-circle"></i> FAQ Management</a>
        </li>
        <li class="{% if active_page == 'settings' %}active{% endif %}">
            <a href="{{ url_for('settings') }}"><i class="fas fa-cog"></i> Bot Settings</a>
        </li>
        
        <li class="section-header">ANALYTICS</li>
        <li class="{% if active_page == 'usage' %}active{% endif %}">
            <a href="{{ url_for('usage') }}"><i class="fas fa-chart-bar"></i> Usage Statistics</a>
        </li>
        <li class="{% if active_page == 'feedback' %}active{% endif %}">
            <a href="{{ url_for('feedback') }}"><i class="fas fa-heart"></i> User Feedback</a>
        </li>
    </ul>
</nav>

            
            <!-- User Profile at Bottom -->
            <div class="sidebar-user-profile">
                <div class="user-avatar">A</div>
                <div class="user-details">
                    <div class="user-name">Admin User</div>
                    <div class="user-role">Super Administrator</div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search" class="search-input" data-search-type="dashboard">
                    </div>
                </div>
                <div class="header-right">
                    <div class="notification-icon">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </div>
                    <div class="user-info">
                        <div class="user-avatar">A</div>
                        <div class="user-details">
                            <div class="user-name">Admin User</div>
                            <div class="user-role">Super Administrator</div>
                        </div>
                    </div>
                    <div class="logout-icon" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <div class="page-content">
                <div class="page-header">
                    <div>
                        <h1 class="page-title">Admin Dashboard</h1>
                        <p class="page-subtitle">Welcome back! Here's what's happening with EduChat today.</p>
                    </div>
                    <div class="page-actions">
                        <button class="btn btn-outline-primary btn-sm" onclick="refreshDashboard()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="exportDashboardData()">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>

                <!-- Loading Indicator -->
                <div id="dashboard-loading" class="text-center py-4" style="display: none;">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2 text-muted">Loading dashboard data...</p>
                </div>

                <!-- KPI Cards -->
                <div class="kpi-grid">
                    <div class="kpi-card" id="total-users">
                        <div class="kpi-icon" style="background: #3b82f6;">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="kpi-content">
                            <h3 id="total-users-count">0</h3>
                            <p>Total Users</p>
                            <span class="kpi-change" id="users-growth">+0%</span>
                        </div>
                    </div>
                    <div class="kpi-card" id="chatbot-sessions">
                        <div class="kpi-icon" style="background: #10b981;">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="kpi-content">
                            <h3 id="chatbot-sessions-count">0</h3>
                            <p>Total Conversations</p>
                            <span class="kpi-change" id="conversations-growth">+0%</span>
                        </div>
                    </div>
                    <div class="kpi-card" id="resolved-queries">
                        <div class="kpi-icon" style="background: #8b5cf6;">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="kpi-content">
                            <h3 id="resolved-queries-count">0</h3>
                            <p>Resolved Queries</p>
                            <span class="kpi-change" id="resolution-growth">+0%</span>
                        </div>
                    </div>
                    <div class="kpi-card" id="escalated-issues">
                        <div class="kpi-icon" style="background: #ef4444;">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="kpi-content">
                            <h3 id="escalated-issues-count">0</h3>
                            <p>Escalated Issues</p>
                            <span class="kpi-change" id="escalated-growth">+0%</span>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title">Usage Analytics</h5>
                                <div class="chart-tabs">
                                    <button class="btn btn-sm btn-primary active" data-period="daily">Daily</button>
                                    <button class="btn btn-sm btn-outline-secondary" data-period="weekly">Weekly</button>
                                    <button class="btn btn-sm btn-outline-secondary" data-period="hourly">Hourly</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <canvas id="usageChart" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title">Department Distribution</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="departmentChart" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity Section -->
                <div class="row mt-4">
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title">Office Activity</h5>
                            </div>
                            <div class="card-body">
                                <div class="office-activity" id="office-activity-list">
                                    <div class="text-center py-3">
                                        <div class="spinner-border spinner-border-sm text-primary" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                        <p class="mt-2 text-muted small">Loading activity...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title">Recent Users</h5>
                            </div>
                            <div class="card-body">
                                <div class="recent-users" id="recent-users-list">
                                    <div class="text-center py-3">
                                        <div class="spinner-border spinner-border-sm text-primary" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                        <p class="mt-2 text-muted small">Loading users...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='assets/js/core/BaseManager.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/modules/AuthManager.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/modules/UserManager.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/modules/ConversationManager.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/modules/FAQManager.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/modules/UsageStatsManager.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/utils/toast.js') }}"></script>

    <script>
    // Global variables
    let usageChart;
    let departmentChart;
    let authManager;
    let usageStatsManager;
    let currentPeriod = 'daily';

    document.addEventListener('DOMContentLoaded', async function() {
        try {
            // Initialize managers
            authManager = new AuthManager();
            usageStatsManager = new UsageStatsManager();
            
            // Check authentication
            if (!authManager.checkAuth()) {
                window.location.href = '/admin/index';
                return;
            }

            // Get current user and update UI
            const currentUser = authManager.getCurrentUser();
            updateUserUI(currentUser);
            
            // Initialize dashboard
            await initializeDashboard();
            
            // Setup event listeners
            setupEventListeners();
            
            // Auto-refresh every 5 minutes
            setInterval(async () => {
                await refreshDashboardData();
            }, 5 * 60 * 1000);
            
        } catch (error) {
            console.error('Dashboard initialization error:', error);
            showToast('Failed to initialize dashboard', 'error');
        }
    });

    async function initializeDashboard() {
        showLoading(true);
        
        try {
            // Initialize charts first
            initializeCharts();
            
            // Load all dashboard data
            await Promise.all([
                updateKPICards(),
                updateUsageChart(currentPeriod),
                updateDepartmentChart(),
                loadRecentActivity()
            ]);
            
            showToast('Dashboard loaded successfully', 'success');
        } catch (error) {
            console.error('Dashboard initialization error:', error);
            showToast('Error loading dashboard data', 'error');
        } finally {
            showLoading(false);
        }
    }

    function updateUserUI(user) {
        if (!user) return;
        
        const userElements = [
            { selector: '.sidebar-user-profile .user-name', content: user.name || 'Admin User' },
            { selector: '.sidebar-user-profile .user-role', content: user.role === 'admin' ? 'Super Administrator' : `${user.role} - ${user.office}` },
            { selector: '.sidebar-user-profile .user-avatar', content: (user.name || 'A').charAt(0).toUpperCase() },
            { selector: '.header .user-name', content: user.name || 'Admin User' },
            { selector: '.header .user-role', content: user.role === 'admin' ? 'Super Administrator' : `${user.role} - ${user.office}` },
            { selector: '.header .user-avatar', content: (user.name || 'A').charAt(0).toUpperCase() }
        ];
        
        userElements.forEach(({ selector, content }) => {
            const element = document.querySelector(selector);
            if (element) element.textContent = content;
        });
    }

    function initializeCharts() {
        // Usage Chart
        const usageCtx = document.getElementById('usageChart').getContext('2d');
        usageChart = new Chart(usageCtx, {
            type: 'bar',
            data: {
                labels: [],
                datasets: [{
                    label: 'Usage',
                    data: [],
                    backgroundColor: '#3b82f6',
                    borderColor: '#1e40af',
                    borderWidth: 0,
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        // Department Chart
        const deptCtx = document.getElementById('departmentChart').getContext('2d');
        departmentChart = new Chart(deptCtx, {
            type: 'doughnut',
            data: {
                labels: [],
                datasets: [{
                    data: [],
                    backgroundColor: [
                        '#3b82f6', '#10b981', '#8b5cf6', '#f59e0b', '#ef4444'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom' }
                }
            }
        });
    }

    async function updateKPICards() {
        try {
            const kpiData = await usageStatsManager.getKPIData();
            const growth = await usageStatsManager.getGrowthPercentage();
            
            // Update KPI values
            const updates = [
                { id: 'total-users-count', value: kpiData.uniqueUsers || 0 },
                { id: 'chatbot-sessions-count', value: kpiData.totalConversations || 0 },
                { id: 'resolved-queries-count', value: kpiData.resolvedQueries || 0 },
                { id: 'escalated-issues-count', value: kpiData.escalatedIssues || 0 }
            ];
            
            updates.forEach(({ id, value }) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = formatNumber(value);
                }
            });
            
            // Update growth percentages
            const growthUpdates = [
                { id: 'users-growth', value: growth.users || 0 },
                { id: 'conversations-growth', value: growth.conversations || 0 },
                { id: 'resolution-growth', value: growth.resolution || 0 },
                { id: 'escalated-growth', value: growth.resolution || 0 }
            ];
            
            growthUpdates.forEach(({ id, value }) => {
                const element = document.getElementById(id);
                if (element) {
                    const isPositive = value >= 0;
                    element.textContent = `${isPositive ? '+' : ''}${value.toFixed(1)}%`;
                    element.className = `kpi-change ${isPositive ? 'positive' : 'negative'}`;
                }
            });
            
        } catch (error) {
            console.error('Error updating KPI cards:', error);
            showToast('Error loading KPI data', 'error');
        }
    }

    async function updateUsageChart(period = 'daily') {
        try {
            const usageData = await usageStatsManager.getUsageByTimeData(period);
            
            usageChart.data.labels = usageData.labels;
            usageChart.data.datasets[0].data = usageData.data;
            usageChart.update();
            
        } catch (error) {
            console.error('Error updating usage chart:', error);
            showToast('Error loading usage chart', 'error');
        }
    }

    async function updateDepartmentChart() {
        try {
            const deptData = await usageStatsManager.getDepartmentStats();
            
            departmentChart.data.labels = deptData.labels;
            departmentChart.data.datasets[0].data = deptData.data;
            departmentChart.update();
            
        } catch (error) {
            console.error('Error updating department chart:', error);
            showToast('Error loading department chart', 'error');
        }
    }

    async function loadRecentActivity() {
        try {
            // Mock recent activity data - replace with actual API call
            const activities = [
                {
                    icon: 'fas fa-file-alt',
                    iconBg: '#3b82f6',
                    title: "Registrar's Office",
                    description: 'Updated 12 FAQ entries',
                    time: '2 hours ago'
                },
                {
                    icon: 'fas fa-comments',
                    iconBg: '#10b981',
                    title: 'Admissions Office',
                    description: 'Added 3 new admission responses',
                    time: '4 hours ago'
                },
                {
                    icon: 'fas fa-user',
                    iconBg: '#8b5cf6',
                    title: 'Guidance Office',
                    description: 'Updated counseling schedule',
                    time: '6 hours ago'
                }
            ];
            
            const activityHTML = activities.map(activity => `
                <div class="activity-item">
                    <div class="activity-icon" style="background: ${activity.iconBg};">
                        <i class="${activity.icon}"></i>
                    </div>
                    <div class="activity-content">
                        <h6>${activity.title}</h6>
                        <p>${activity.description}</p>
                        <span class="activity-time">${activity.time}</span>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('office-activity-list').innerHTML = activityHTML;
            
            // Load recent users
            const users = [
                { name: 'John Smith', office: 'Guidance Office', status: 'Active' },
                { name: 'Sarah Wilson', office: 'Registrar Office', status: 'Active' },
                { name: 'Mike Johnson', office: 'ICT Office', status: 'Inactive' }
            ];
            
            const usersHTML = users.map(user => `
                <div class="user-item">
                    <div class="user-avatar">${user.name.charAt(0)}</div>
                    <div class="user-info">
                        <h6>${user.name}</h6>
                        <p>${user.office}</p>
                    </div>
                    <span class="user-status ${user.status.toLowerCase()}">${user.status}</span>
                </div>
            `).join('');
            
            document.getElementById('recent-users-list').innerHTML = usersHTML;
            
        } catch (error) {
            console.error('Error loading recent activity:', error);
        }
    }

    function setupEventListeners() {
        // Chart period tabs
        document.querySelectorAll('.chart-tabs .btn').forEach(btn => {
            btn.addEventListener('click', async function() {
                // Update tab styles
                document.querySelectorAll('.chart-tabs .btn').forEach(b => {
                    b.classList.remove('btn-primary', 'active');
                    b.classList.add('btn-outline-secondary');
                });
                this.classList.remove('btn-outline-secondary');
                this.classList.add('btn-primary', 'active');
                
                // Update chart
                currentPeriod = this.dataset.period;
                await updateUsageChart(currentPeriod);
            });
        });
    }

    async function refreshDashboard() {
        showToast('Refreshing dashboard...', 'info');
        
        try {
            // Clear cache
            usageStatsManager.clearCache();
            
            // Refresh all data
            await Promise.all([
                updateKPICards(),
                updateUsageChart(currentPeriod),
                updateDepartmentChart(),
                loadRecentActivity()
            ]);
            
            showToast('Dashboard refreshed successfully', 'success');
        } catch (error) {
            console.error('Error refreshing dashboard:', error);
            showToast('Error refreshing dashboard', 'error');
        }
    }

    async function exportDashboardData() {
        try {
            showToast('Exporting dashboard data...', 'info');
            
            const csvData = await usageStatsManager.exportToCSV('kpi');
            
            // Create download link
            const blob = new Blob([csvData], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `dashboard-export-${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            showToast('Dashboard data exported successfully', 'success');
        } catch (error) {
            console.error('Error exporting dashboard data:', error);
            showToast('Error exporting dashboard data', 'error');
        }
    }

    async function refreshDashboardData() {
        try {
            await usageStatsManager.refreshData();
            await updateKPICards();
        } catch (error) {
            console.error('Auto-refresh error:', error);
        }
    }

    async function logout() {
        try {
            await authManager.logout();
            window.location.href = '/admin/index';
        } catch (error) {
            console.error('Logout error:', error);
            window.location.href = '/admin/index';
        }
    }

    function showLoading(show) {
        const loadingElement = document.getElementById('dashboard-loading');
        if (loadingElement) {
            loadingElement.style.display = show ? 'block' : 'none';
        }
    }

    function formatNumber(num) {
        if (num >= 1000000) {
            return (num / 1000000).toFixed(1) + 'M';
        } else if (num >= 1000) {
            return (num / 1000).toFixed(1) + 'K';
        }
        return num.toString();
    }

    function showToast(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `alert alert-${type === 'error' ? 'danger' : type === 'success' ? 'success' : 'info'} alert-dismissible fade show`;
        toast.style.cssText = 'position: fixed; top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
        toast.innerHTML = `
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        
        document.body.appendChild(toast);
        
        setTimeout(() => {
            if (toast.parentNode) {
                toast.parentNode.removeChild(toast);
            }
        }, 5000);
    }

    // Global functions
    window.refreshDashboard = refreshDashboard;
    window.exportDashboardData = exportDashboardData;
    window.logout = logout;
</script>

    <style>
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .page-actions {
            display: flex;
            gap: 0.5rem;
        }

        .sidebar-user-profile {
            position: absolute;
            bottom: 1.5rem;
            left: 1.5rem;
            right: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 8px;
        }

        .sidebar-user-profile .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #3b82f6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .sidebar-user-profile .user-details {
            flex: 1;
        }

        .sidebar-user-profile .user-name {
            font-size: 0.875rem;
            font-weight: 500;
            color: white;
            margin: 0;
        }

        .sidebar-user-profile .user-role {
            font-size: 0.75rem;
            color: #93c5fd;
            margin: 0;
        }

        .header .user-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .header .user-details {
            display: flex;
            flex-direction: column;
        }

        .header .user-name {
            font-size: 0.875rem;
            font-weight: 500;
            color: #1e293b;
            margin: 0;
        }

        .header .user-role {
            font-size: 0.75rem;
            color: #64748b;
            margin: 0;
        }

        .chart-tabs .btn {
            padding: 0.375rem 0.75rem;
            font-size: 0.75rem;
            border-radius: 6px;
        }

        .kpi-change.positive {
            color: #059669;
        }

        .kpi-change.negative {
            color: #dc2626;
        }

        .office-activity, .recent-users {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .activity-item, .user-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            border-radius: 8px;
            background: #f8fafc;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
        }

        .activity-content h6, .user-info h6 {
            margin: 0;
            color: #1e293b;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .activity-content p, .user-info p {
            margin: 0.25rem 0;
            color: #64748b;
            font-size: 0.75rem;
        }

        .activity-time {
            color: #94a3b8;
            font-size: 0.75rem;
        }

        .user-item .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #3b82f6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .user-status {
            margin-left: auto;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .user-status.active {
            background: #dcfce7;
            color: #166534;
        }

        .user-status.inactive {
            background: #fef2f2;
            color: #dc2626;
        }

        @media (max-width: 768px) {
            .kpi-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .page-header {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
            }

            .page-actions {
                justify-content: center;
            }

            .card-header {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
            }

            .chart-tabs {
                justify-content: center;
            }

            .user-info .user-details {
                display: none;
            }
        }

        .logout-icon {
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: background-color 0.2s;
        }

        .logout-icon:hover {
            background-color: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        .notification-icon {
            position: relative;
            cursor: pointer;
            padding: 0.5rem;
        }

        .notification-badge {
            position: absolute;
            top: 0.25rem;
            right: 0.25rem;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 1.25rem;
            height: 1.25rem;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-bar {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-bar i {
            position: absolute;
            left: 1rem;
            color: #64748b;
            z-index: 1;
        }

        .search-input {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            background: white;
            font-size: 0.875rem;
            min-width: 300px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .btn-sm {
            font-size: 0.875rem;
            padding: 0.375rem 0.75rem;
        }

        .spinner-border-sm {
            width: 1rem;
            height: 1rem;
        }

        .text-muted {
            color: #64748b;
        }

        .small {
            font-size: 0.875rem;
        }
    </style>
</body>
</html>